@if(!isLoading){


<div class="dropdown dropdown-end">
  <div tabindex="0" role="button" class="mx-2 rounded-3xl">

<!-- <div tabindex="0" role="button" class="btn mx-1 rounded-3xl"> -->
  <div class="flex align-items-center">
    @if(user){
    <app-avatar-frame [profile_picture]="user.profile_picture || 'https://picsum.photos/seed/' + user.username + '/1280/720'" profile_size="small" [frame_name]="user.profile_picture_frame"></app-avatar-frame>
    }@else {
      <i class="fa-regular fa-user text-2xl"></i>
    }

</div>
<ul class="p-2 shadow gap-2 menu dropdown-content z-[1] bg-base-100 rounded-box min-w-52 w-fit">
  <li><a class="flex items-center p-3 text-sm" target="_blank">
   @if (user) {
    <app-avatar-frame [profile_picture]="user.profile_picture" profile_size="small" [frame_name]="user.profile_picture_frame"></app-avatar-frame>
  }@else {
    <i class="fa-regular fa-user text-2xl"></i>
  }
    <div class="mx-1">
      @if(user){
        <h5 class="text-lg">{{user.fullname}}</h5>
        <span class="text-base italic">{{user.username}}</span> 
      }@else {
        <h5 class="text-lg">{{userStorage.fullname}}</h5>
        <span class="text-base italic">{{userStorage.username}}</span>        }
    </div>
</a></li>
<li class="dividied -m-0.5"></li>
  <li><a [routerLink]="profileUrl"><i class="fa-regular fa-user"></i> Perfil</a></li>
  <li><a routerLink="/settings"><i class="fa-regular fa-cog"></i> Ajustes</a></li>
  <li class="dividied -m-0.5"></li>
  <li class="disabled"><a><i class="fa-regular fa-book-atlas"></i> Guias</a></li>
  <li class="disabled"><a><i class="fa-regular fa-hexagon-exclamation"></i> Ayuda</a></li>
  <li class="dividied -m-0.5"></li>
  <li><a routerLink="/sp-admin"><i class="fa-regular fa-badge-sheriff"></i> Panel Admin</a></li>
  <li class="dividied -m-0.5"></li>
  <li (click)="logout()"><a class="hover:bg-error hover:text-white"><i class="fa-regular fa-sign-out"></i> Cerrar Sesi√≥n</a></li>
</ul>
</div>
</div>
}
@else {
  <i class="fa-solid fa-spinner animate-spin"></i>
}