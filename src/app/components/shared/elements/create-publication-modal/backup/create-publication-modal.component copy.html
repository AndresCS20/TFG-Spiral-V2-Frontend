<!-- Open the modal using ID.showModal() method -->
<button class="btn tooltip tooltip-bottom flex" data-tip="Crear publicación" onclick="create_post.showModal()"><i class="fa-regular fa-circle-plus"></i> <span class="hidden lg:block">Crear publicación</span></button>
<dialog id="create_post" class="modal">
  <div class="modal-box w-11/12 max-w-screen-xl p-5">
    <h3 class="font-bold text-lg"><i class="fa-regular fa-circle-plus"></i> Crear publicación</h3>
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-4 top-4">✕</button>
    </form>
    Tipo de publicación
    <div class="bg-base-200 w-full rounded-box justify-center flex my-5">
      
    <ul class="menu menu-vertical lg:menu-horizontal gap-3">
      <li>
        <a [className]="publicationType == 'text' ? 'active' : ''" (click)="setPublicationType('text')">Texto</a>
      </li>
      <li>
        <a [className]="publicationType == 'image' ? 'active' : ''" (click)="setPublicationType('image')">Imagen</a>
      </li>
      <li>
        <a [className]="publicationType == 'url' ? 'active' : ''" (click)="setPublicationType('url')">URL</a>
      </li>
    </ul></div>
    <form >
    @switch (publicationType) {
     @case ("text") {
      <textarea rows="3" class="textarea textarea-bordered textarea-lg w-full" placeholder="¿En que estas pensando" id="text-input"></textarea>
     }
     @case ("image") {
      <div class="form-control">
      @for (imageUrl of imageUrls; track imageUrl; let $idx = $index) {
      <p>IMAGE URL {{$idx}}</p>
        <input type="text" class="input input-bordered" placeholder="URL de la imagen" [(ngModel)]="imageUrls[$idx]" [ngModelOptions]="{standalone: true}" name="{{imageUrls[$idx]}}" (input)="onInput($idx)">
        <button class="btn" (click)="addImage($idx)">Añadir imagen</button>
      }
      </div>
      <div id="imageContainer"></div>
     }
     @case ("url") {

     }
    }

    <label class="form-control w-full">
      <div class="label">
        <span class="label-text">Elige donde crear la publicación</span>
      </div>
      <select class="select select-bordered"> 
        <option>Global</option>
        <option>BlackMesa</option>
        <option>Portal</option>
        <option>Spain</option>
      </select>
      </label>  
   <button class="btn btn-primary w-full mt-2">Publicar</button>
  </form>
  </div>
</dialog>